var appVueFiltro=new Vue({el:"#filtro_lateral",data:{categorias:[],inputPalavraChave:"",arrPalavrasChaves:[],checksSelecionados:[],disabledChecks:!1},methods:{buscaDadosFiltro:function(){var e=appVueFiltro.getQueryString();$.post("/produto/busca-filtro",{parametro:e},function(e){appVueFiltro.categorias=$.parseJSON(e),appVueFiltro.checaItens()})},guardaCheck:function(e){appVueFiltro.disabledChecks=!0;var a=e[0].toLowerCase(),t="string"==typeof e[1]?e[1].toLowerCase():e[1];if(null!=appVueFiltro.checksSelecionados[a]){var o=appVueFiltro.checksSelecionados[a].indexOf(t);o>=0?appVueFiltro.checksSelecionados[a].splice(o,1):appVueFiltro.checksSelecionados[a].push(t)}else appVueFiltro.checksSelecionados[a]=[t];var n=[],i=0;for(var r in appVueFiltro.checksSelecionados)appVueFiltro.checksSelecionados[r].length>0&&(n[i]=r+"="+appVueFiltro.checksSelecionados[r].join(","),i++);var s=n.join("&"),c="/produtos";if(""!=s)c="?"+s;window.open(c,"_self")},checaItens:function(){var e=appVueFiltro.getQueryString(),a=[];for(var t in e)for(var o in a=e[t].split(","))null!=appVueFiltro.categorias.Categoria.itens[a[o]]&&(appVueFiltro.categorias.Categoria.itens[a[o]].checked=!0),null!=appVueFiltro.categorias.Estado.itens[a[o]]&&(appVueFiltro.categorias.Estado.itens[a[o]].checked=!0),null!=appVueFiltro.checksSelecionados[t]?appVueFiltro.checksSelecionados[t].push(a[o]):appVueFiltro.checksSelecionados[t]=[a[o]]},getQueryString:function(){var e=location.search.slice(1),a={};return e&&e.split("&").forEach(function(e){var t=e.split("="),o=t[0],n=t[1];a[o]=n}),a},palavraChave:function(){var e=this.inputPalavraChave;this.arrPalavrasChaves.push(e),this.inputPalavraChave=""},excluiPalavraChave:function(e){var a=this.arrPalavrasChaves;for(var t in this.arrPalavrasChaves=[],delete a[e],a)this.arrPalavrasChaves.push(a[t])}}});$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var alertaPagina=function(e,a){if("undefined"==e||"undefined"==a)return!1;switch(a){case"success":icone="glyphicon-warning-sign";break;case"danger":icone="glyphicon-danger-sign";break;case"warning":icone="glyphicon-warning-sign";break;default:icone=""}$.notify({message:e},{element:"body",type:a,allow_dismiss:!0,placement:{from:"top",align:"center"},offset:20,spacing:10,z_index:1031,delay:4e3,timer:1e3,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"}})},alertaComponente=function(e,a,t,o){if("undefined"==e||"undefined"==a||"undefined"==t)return!1;"undefined"==o&&(o="top"),$("#"+e).notify(a,{clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,position:o,style:"bootstrap",className:t,showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:2})};function empty(e){var a,t,o,n=[void 0,null,!1,0,"","0"];for(t=0,o=n.length;t<o;t++)if(e===n[t])return!0;if("object"==typeof e){for(a in e)if(e.hasOwnProperty(a))return!1;return!0}return!1}function carregarMiniatura(e,a){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("."+a).attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function getQueryString(){var e={};return location.search.slice(1).split("&").forEach(function(a){var t=a.split("="),o=t[0],n=t[1];e[o]=n}),e}function buscaNotificacao(){}var appVueMsg=new Vue({el:"#el-mensagem",data:{aba:{enviada:!0,recebida:!1}},methods:{buscaDados:function(){this.$http.post("").then(function(e){})},alteraAba:function(e){1==e?(this.aba.enviada=!0,this.aba.recebida=!1):(this.aba.recebida=!0,this.aba.enviada=!1)},abreConversa:function(e){var a={conversa_id:e};this.$http.post("/minha-conta/mensagem/updateNotificacao",a).then(function(e){}),$(".conversa").addClass("hide"),$("#conversa_"+e).removeClass("hide")},excluiConversa:function(e){if(confirm("Deseja realmente apagar esta conversa?")){var a={conversa_id:e};this.$http.post("/minha-conta/mensagem/delete",a).then(function(e){e.body?(alertaPagina("Conversa excluida com sucesso.","success"),setTimeout(function(){window.open("/minha-conta/mensagem","_self")},2e3)):alertaPagina("Erro ao excluir conversa! [cod:1]","danger")})}},enviarResposta:function(e,a,t){}},created:function(){$(".el-mensagem").removeClass("hide")}});$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),Vue.config.devtools=!0;var appVuePerfil=new Vue({el:"#el-form",data:{hide:{content:!0,instrucao:!0},btnForm:!0,divAlterPassword:!1},methods:{alterarFoto:function(){$("#select_image").trigger("click"),this.hide.instrucao=!1},selecionarFoto:function(){var e=$("#select_image")[0];this.alteraImagemPerfil(e)},alteraImagemPerfil:function(e){$("#select_image").next().html("");var a=new FileReader;a.onload=function(){var e=new Image;e.src=a.result,e.onload=function(){var t='<img src="'+a.result+'" id="target" alt="Foto perfil" />';$("#div_imagem_alteracao").html(t);var o='<div id="preview-pane" class="hide"><div class="preview-container"><img src="'+a.result+'" class="jcrop-preview" alt="Foto perfil Preview" /></div></div>';$(".preview").html(o),$(".div_visualizacao").removeClass("hide"),$(".div_imagem").addClass("hide"),$("#x").val(0),$("#y").val(0),$("#w").val(e.width),$("#h").val(e.height);var n,i,r,s=$("#preview-pane"),c=$("#preview-pane .preview-container"),d=$("#preview-pane .preview-container img"),l=c.width(),u=c.height();function p(e){if(parseInt(e.w)>0){var a=l/e.w,t=u/e.h;d.css({width:Math.round(a*i)+"px",height:Math.round(t*r)+"px",marginLeft:"-"+Math.round(a*e.x)+"px",marginTop:"-"+Math.round(t*e.y)+"px"}),$("#preview-pane").removeClass("hide")}$("#x").val(e.x),$("#y").val(e.y),$("#w").val(e.w),$("#h").val(e.h)}$("#target").Jcrop({onChange:p,onSelect:p,aspectRatio:0,bgOpacity:.2},function(){var e=this.getBounds();i=e[0],r=e[1],n=this,s.appendTo(n.ui.holder)})}},a.readAsDataURL(e.files[0])},cancelarFoto:function(){$(".div_visualizacao").addClass("hide"),$(".div_imagem").removeClass("hide")},openAlterPassword:function(){this.btnForm=!1,this.divAlterPassword=!0},closeAlterPassword:function(){this.btnForm=!0,this.divAlterPassword=!1}},created:function(){this.hide.content=!1}});function checarSelecao(){return!!parseInt($("#w").val())||(alertaPagina("Selecione a área para recorte.","danger"),!1)}function buscaCEP(e){if(""!=(e=e.replace(/\D/g,""))){/^[0-9]{8}$/.test(e)?($("input[name='endereco']").val("....."),$("input[name='bairro']").val("....."),$("input[name='cidade']").val("....."),$.getJSON("//viacep.com.br/ws/"+e+"/json/?callback=?",function(e){"erro"in e?(limpaEndereco(),alert("CEP não encontrado.")):($("input[name='endereco']").val(e.logradouro),$("input[name='bairro']").val(e.bairro),$("input[name='cidade']").val(e.localidade),$("input[name='uf']").val(e.uf))})):(limpaEndereco(),alert("Formato de CEP inválido."))}else limpaEndereco()}function limpaEndereco(){$("input[name='endereco']").val(""),$("input[name='bairro']").val(""),$("input[name='cidade']").val(""),$("input[name='uf']").val("")}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var appProdutosSite=new Vue({el:".el-produtos",data:{dataDescription:{titulo:"",descricao:"",estado:"",valor:"",name:"",email:"",fixo:"",cel:""},dataContact:{remetente:"",destinatario:"",titulo:"",produto_id:0,mensagem:""}},methods:{setFavorite:function(e){if(0==e)return alertaPagina("Necessário estar logado para favoritar.","danger"),!1;$.ajax({url:"/minha-conta/favorito/storeFavorito",dataType:"json",type:"POST",data:{produto_id:e},success:function(a){var t=window.sessionStorage.getItem("favorite-product-"+e);(window.sessionStorage.setItem("favorite-product-"+e,a.status),t=window.sessionStorage.getItem("favorite-product-"+e),a.success)?0==t?$(".produto-"+e).find(".img-ativo").addClass("img-inativo").removeClass("img-ativo"):$(".produto-"+e).find(".img-inativo").addClass("img-ativo").removeClass("img-inativo"):alertaPagina("Erro ao salvar favorito.","danger")},error:function(e){alertaPagina("Erro no sistema! cod-02","danger")}})},openContact:function(e){this.dataContact.mensagem="",$.ajax({url:"/minha-conta/mensagem/create",dataType:"json",type:"POST",data:{produto_id:e},success:function(a){appProdutosSite.dataContact.remetente=a.nome_remet,appProdutosSite.dataContact.destinatario=a.name,appProdutosSite.dataContact.titulo=a.titulo,appProdutosSite.dataContact.produto_id=e},error:function(){alertaPagina("Erro ao buscar dados.","danger")}}),$("#modal-mensagem").modal()},sendContact:function(){if(""==this.dataContact.mensagem)return alertaPagina("Campo mensagem não pode ser vazio","danger"),!1;$.ajax({url:"/minha-conta/mensagem/store",dataType:"json",type:"POST",data:{produto_id:this.dataContact.produto_id,mensagem:this.dataContact.mensagem},success:function(e){1==e.success?alertaPagina("Mensagem enviada com sucesso.","success"):alertaPagina("Erro ao enviar mensagem, tente novamente! [Cod=1]","danger"),$("#modal-mensagem").modal("hide")},error:function(){alertaPagina("Erro ao enviar mensagem, tente novamente! [Cod=2]","danger")}})}},created:function(){$(".el-produtos").removeClass("hide")}}),appProdutosMinhaConta=new Vue({el:".el-produtos-minha-conta",data:{},methods:{deleteProduct:function(e){confirm("Deseja realmente excluir este produto?")}},created:function(){$(".el-produtos-minha-conta").removeClass("hide")}});$(".act-excluir-foto").click(function(){if(confirm("Deseja realmente excluir esta foto?")){var e=$(".act-excluir-foto").attr("data-produto-id"),a=$(this).attr("data-foto");$.ajax({url:"/minha-conta/produto/delete-foto",type:"post",dataType:"json",data:{nm_foto:a,produto_id:e},success:function(e){(e.sucesso=!0)?window.location.reload():alertaPagina(e.msg,"danger")},error:function(){alertaPagina("Erro no sistema!","danger")}})}}),null!=document.getElementById("valor")&&VMasker(document.getElementById("valor")).maskMoney();